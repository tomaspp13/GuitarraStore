@{
    ViewData["Title"] = "Manejo de datos";
}

<body>

    <h2>CRUD</h2>
    <form id="formulario" >

        <label for="marca">Marca:</label>
        <input type="text" id="marca" name="marca" required>
        <br>
        <label for="modelo">Modelo:</label>
        <input type="text" id="modelo" name="modelo" required>
        <br>
        <label for="precio">Precio:</label>
        <input type="number" id="precio" name="precio" required>
        <br>
        <button type ="submit" id="crearGuitarra">Crear Guitarra</button>

    </form>
   
    <script>


            document.getElementById("formulario").addEventListener("submit",async (e)=>{

                e.preventDefault();

                const marcaInput = document.getElementById("marca").value;
                const modeloInput = document.getElementById("modelo").value;
                const precioInput = parseFloat(document.getElementById("precio").value);

                try
                {

                    const documento = await fetch("/api/guitarra/Create",{

                        method: "POST",
                        headers: {

                           "Content-Type": "application/json"

                        },
                        body: JSON.stringify({

                            marca: marcaInput,
                            modelo: modeloInput,
                            precio: precioInput
 
                        })

                    });

                        if (!documento.ok) {
                            throw new Error("Error en la respuesta de la API");
                        }

                    document.getElementById("marca").value = "";
                    document.getElementById("modelo").value = "";
                    document.getElementById("precio").value = "";

                    alert("Guitarra creada exitosamente");
                }
                catch(error)
                {
            
                    alert("Error al crear la guitarra: " + error.message);
            
                } 

            });
       
    </script>

</body>